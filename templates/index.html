<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Analizador de YouTube</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
  <!-- Header fijo ---------------------------------------------->
  <header class="top-nav" role="banner">
    <div class="top-nav__inner container">
      <h1 class="top-nav__brand">Analizador de Canales</h1>

      <nav class="top-nav__actions nav-buttons" aria-label="Acciones principales">
        <a href="{{ url_for('add_channel') }}" class="btn btn-analyze" role="button">Añadir Canal</a>
        <a href="{{ url_for('historial') }}" class="btn btn-analyze btn--secondary" role="button">Historial</a>
      </nav>

      <!-- Menú hamburguesa (solo visible en móvil) -->
      <button class="hamburger" aria-label="Abrir menú" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>
    </div>
  </header>

  <!-- Contenido principal --------------------------------------->
  <main class="container" id="main-content">
    <!-- Hero / Mensaje principal -->
    <section class="hero">
      <h2 class="hero__title">Selecciona un canal para iniciar el análisis</h2>
      <p class="hero__subtitle">El proceso puede tardar hasta 2 minutos.</p>
    </section>

    <!-- Mensajes flash (notificaciones) -->
    <section aria-live="polite">
      {% with messages = get_flashed_messages() %}
        {% if messages %}
          {% for message in messages %}
            <div class="flash-message" role="alert">
              <span class="flash-message__icon" aria-hidden="true">✅</span>
              <span class="flash-message__text">{{ message }}</span>
            </div>
          {% endfor %}
        {% endif %}
      {% endwith %}
    </section>

    <hr class="divider">

    <!-- Lista de canales --------------------------------------->
    <section class="channel-list">
      {% for channel in channels %}
        <article class="channel card">
          <span class="channel-name">{{ channel.channel_name }}</span>

          <div class="actions">
            <a href="{{ url_for('start_analysis', channel_id=channel.channel_id) }}"
               class="btn btn-analyze"
               role="button">Analizar</a>

            <form action="{{ url_for('delete_channel', channel_id=channel.channel_id) }}"
                  method="POST" class="delete-form"
                  onsubmit="return confirm('¿Estás seguro de que quieres borrar este canal?');">
              <button type="submit" class="btn btn-delete">Borrar</button>
            </form>
          </div>
        </article>
      {% else %}
        <p class="no-channels">No se encontraron canales. ¡Añade uno para empezar!</p>
      {% endfor %}
    </section>
  </main>

  <!-- Footer opcional ------------------------------------------->
  <footer class="site-footer">
    <p>&copy; {{ 2024 }} Analizador de YouTube</p>
  </footer>
</body>
</html>